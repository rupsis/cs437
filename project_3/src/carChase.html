<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Car Chase</title>
    <script type="text/javascript" src = "./simpleGame.js"></script>
    <script type="text/javascript" src = "./player.js"></script>
    <script type="text/javascript" src = "./background.js"></script>
    <script type="text/javascript" src = "./car.js"></script>
    <script type="text/javascript" src = "./secondaryObjects.js"></script>

<script type="text/javascript">

var scene; 
var player;
var background;
var cars;
var trees;

// Constants
var NUM_TREE = 2;
var BACKGROUND_SPEED = 10;


function init(){
    // create new scene
    scene = new Scene();
    scene.setSize(800, 600);

    
    makeCars();
    makeSecondaryObject();
    background = new Background();
    player = new Player();
   

    scene.start();
}  // end init
        
function update(){           
    scene.clear();

    checkCollision()

    background.update();
    updateCars();
    updateSecondaryObject();
    player.checkKeys();
    player.update();
   

} 

function stop(){
    console.log("collision");
    scene.stop();
    var replay = confirm("game over. Play again?");
    if(replay){
        location.reload(); 
    }
}


function checkCollision(){
    for (i = 0; i < NUM_CARS; i++){
        if (player.collidesWith(cars[i])){
            stop();
        } 
    } 
    for(i = 0; i < NUM_TREE; i++){
        if (player.collidesWith(trees[i])){
            stop();
        } 
    }
}



</script>
</head>
<body onload = "init()">

</body>
</html>